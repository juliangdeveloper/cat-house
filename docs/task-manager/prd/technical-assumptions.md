# Technical Assumptions

## Repository Structure: Monorepo
The Task Manager API will be developed as a standalone service within a future monorepo structure that will house multiple backend services (Email Manager, Finance Tracker, etc.). For Phase 1, it can start as a single repository.

## Service Architecture
**Backend-Only REST API Service** - Pure stateless API with no frontend components. The service is completely independent and exposes only REST endpoints for external consumption by Cat House Platform.

## Technology Stack
- **Runtime:** Python 3.12
- **Framework:** FastAPI 0.115.0
- **Database:** Neon PostgreSQL (serverless) for relational data persistence with proper indexing on user_id
- **Database Client:** asyncpg 0.29.0 for async database operations
- **Migrations:** Alembic 1.13.1 for database schema versioning
- **Authentication:** Service API Key validation (X-API-Key header) for client application authentication with automatic rotation support via AWS Secrets Manager
- **API Documentation:** OpenAPI 3.0 specification auto-generated by FastAPI with Swagger UI
- **Logging:** structlog 24.4.0 for structured logging
- **Testing:** pytest 8.3.0 with pytest-asyncio for unit and integration tests
- **Code Quality:** ruff for linting and formatting, mypy for type checking
- **Server:** uvicorn 0.31.0 + gunicorn 23.0.0 for production ASGI serving
- **Containerization:** Docker with multi-stage builds, Docker Compose for local development

## Testing Requirements
- **Unit tests** for business logic and data validation
- **Integration tests** for API endpoints using test database
- **API contract testing** to ensure `/stats` endpoint contract stability
- Manual testing via Postman/Thunder Client during development

## Deployment & Infrastructure
- **Cloud Provider:** AWS
- **Compute:** ECS Fargate (serverless containers) with 0.25 vCPU and 512MB RAM per task
- **Container Registry:** AWS ECR (Elastic Container Registry) for Docker images
- **Load Balancing:** Application Load Balancer (ALB) with health checks
- **Infrastructure as Code:** Terraform for reproducible infrastructure provisioning
- **Domain & SSL:** gamificator.click (existing Route 53 hosted zone) with ACM certificate for HTTPS
- **Secrets Management:** AWS Secrets Manager for DATABASE_URL and service API keys (with rotation support)
- **Logging:** CloudWatch Logs for centralized log aggregation
- **CI/CD:** GitHub Actions for automated testing, building, and deployment
- **Database:** Neon PostgreSQL (external, serverless)
- **Deployment Strategy:** Rolling updates with zero-downtime via ECS service updates
- **Environment Management:** Separate .env files for development, staging, and production

## Additional Technical Assumptions
- All API responses return JSON format
- Error responses follow standardized structure with error codes
- CORS configuration to allow Cat House Platform origin
- API versioning strategy (e.g., `/v1/tasks`) for future compatibility
- Logging framework integrated from project start for debugging
- Development environment uses Docker Compose with hot-reload for rapid iteration
- Production images use multi-stage Docker builds for optimization (final image ~150MB)
- API accessible via subdomain: api.gamificator.click
- Database migrations run automatically as part of deployment pipeline via ECS RunTask

---
